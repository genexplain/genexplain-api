



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="The geneXplain platform Java API manual">
      
      
      
        <meta name="author" content="pstegma">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.6">
    
    
      
        <title>JSON interface Hello world tutorial - The geneXplain Java API documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#json-interface-tutorial" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="The geneXplain Java API documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                The geneXplain Java API documentation
              </span>
              <span class="md-header-nav__topic">
                JSON interface Hello world tutorial
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/genexplain/genexplain-api/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="The geneXplain Java API documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    The geneXplain Java API documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/genexplain/genexplain-api/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../java_api/" title="Java API" class="md-nav__link">
      Java API
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      JAR applications and JSON interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        JAR applications and JSON interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../java_json_manual_intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../json_interface/" title="JAR application manuals" class="md-nav__link">
      JAR application manuals
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        JSON interface Hello world tutorial
      </label>
    
    <a href="./" title="JSON interface Hello world tutorial" class="md-nav__link md-nav__link--active">
      JSON interface Hello world tutorial
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hello-world-example" title="Hello world example" class="md-nav__link">
    Hello world example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lists-of-tasks" title="Lists of tasks" class="md-nav__link">
    Lists of tasks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-tasks-from-file" title="Loading tasks from file" class="md-nav__link">
    Loading tasks from file
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deep-nesting-and-infinite-looping" title="Deep nesting and infinite looping" class="md-nav__link">
    Deep nesting and infinite looping
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deep-nesting" title="Deep nesting" class="md-nav__link">
    Deep nesting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infinite-flow" title="Infinite flow" class="md-nav__link">
    Infinite flow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-from-a-task-library" title="Loading from a task library" class="md-nav__link">
    Loading from a task library
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameter-placeholders" title="Parameter placeholders" class="md-nav__link">
    Parameter placeholders
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cascaded-replacement" title="Cascaded replacement" class="md-nav__link">
    Cascaded replacement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-parameter-settings" title="Local parameter settings" class="md-nav__link">
    Local parameter settings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hello-world-example" title="Hello world example" class="md-nav__link">
    Hello world example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lists-of-tasks" title="Lists of tasks" class="md-nav__link">
    Lists of tasks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-tasks-from-file" title="Loading tasks from file" class="md-nav__link">
    Loading tasks from file
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deep-nesting-and-infinite-looping" title="Deep nesting and infinite looping" class="md-nav__link">
    Deep nesting and infinite looping
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deep-nesting" title="Deep nesting" class="md-nav__link">
    Deep nesting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#infinite-flow" title="Infinite flow" class="md-nav__link">
    Infinite flow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-from-a-task-library" title="Loading from a task library" class="md-nav__link">
    Loading from a task library
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameter-placeholders" title="Parameter placeholders" class="md-nav__link">
    Parameter placeholders
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cascaded-replacement" title="Cascaded replacement" class="md-nav__link">
    Cascaded replacement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-parameter-settings" title="Local parameter settings" class="md-nav__link">
    Local parameter settings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/genexplain/genexplain-api/edit/master/docs/json_hello_world.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="json-interface-tutorial">JSON interface tutorial</h1>
<p>The following sections show how to run platform tasks through the JSON interface and how to use its
possibilities to build analysis workflows and pipelines.</p>
<p>To execute the JSON configurations of the tutorial change to the subdirectory of the <em>genexplain-api</em> Git repository
named <em>docs/tutorial</em>. Let us start with the Hello world example.</p>
<h2 id="hello-world-example">Hello world example</h2>
<p>The output of the <em>hello_world.json</em> file contained in  mentioned folder is shown below. The single task
specified for the <em>tasks</em> property leads to execution of <em>docs/tutorial/script.sh</em> which simply echos the commandline input.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;withoutConnect&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello world&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>gene@xplain:genexplain-api/docs/tutorial$ java -jar ../../build/libs/genexplain-api-1.0.jar <span class="nb">exec</span> hello_world.json 
INFO  com.genexplain.api.app.APIRunner - Running <span class="nb">command</span> <span class="nb">exec</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Hello world
</pre></div>
</td></tr></table>

<h2 id="lists-of-tasks">Lists of tasks</h2>
<p>Building pipelines and workflows is easy. One step to get started with this is to be able
to specify lists of tasks that are executed sequentially. For this you just let <em>tasks</em> be a
JSON array.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;withoutConnect&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
            <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
            <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 1&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
            <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
            <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 2&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
            <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
            <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 3&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Execute the tutorial file <em>task_list.json</em> to see this at work.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>gene@xplain:genexplain-api/docs/tutorial$ java -jar ../../build/libs/genexplain-api-1.0.jar <span class="nb">exec</span> task_list.json 
INFO  com.genexplain.api.app.APIRunner - Running <span class="nb">command</span> <span class="nb">exec</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">1</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">2</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">3</span>
</pre></div>
</td></tr></table>

<h2 id="loading-tasks-from-file">Loading tasks from file</h2>
<p>A pipeline with many tasks may be more convenient to manage in multiple files. It is
possible to load tasks from a file.</p>
<p>We can simply write the three tasks of our previous example into a
separate file and load the task array in our main object.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 1&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 2&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 3&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>In our main object we specify the file using the <em>fromFile</em> property as shown below. explain
more details in the documentation.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;withoutConnect&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;fromFile&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;loadable_task_list.json&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Running that we get:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>genexplain-api/docs/tutorial$ java -jar ../../build/libs/genexplain-api-1.0.jar <span class="nb">exec</span> loading_task_list.json 
INFO  com.genexplain.api.app.APIRunner - Running <span class="nb">command</span> <span class="nb">exec</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">1</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">2</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">3</span>
</pre></div>
</td></tr></table>

<h3 id="deep-nesting-and-infinite-looping">Deep nesting and infinite looping</h3>
<p>So, now we can write bigger task lists into separate files which is already one step towards maintaining more complex
workflows, but sometimes it gets even more complex than is conveniently handled with one file for all the tasks. And indeed 
the JSON executor is not limited to what we have shown so far, but allows for arbitrary levels of nesting. What goes on
in the backend is a recursive method that calls itself with JSON arguments until it finds a task that is processed by the
specified executor.</p>
<h4 id="deep-nesting">Deep nesting</h4>
<p>Let us create an extra level of nesting for <em>task 1</em> in our example by specifying a list of tasks <em>1a - 1c</em> in a separate file. We call this
file <em>nested_task_1.json</em>. </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 1a&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 1b&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 1c&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>Next, we adapt our <em>loadable_task_list</em> by replacing for <em>task 1</em> again an instruction that will cause the new file to be loaded. We call this
new file <em>loadable_nested_task_list.json</em>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;fromFile&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;nested_task_1.json&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 2&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 3&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>Our main JSON object actually only requires a change of file name in the <em>fromFile</em> property and we also save under the name <em>loading_nested_task.json</em>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;withoutConnect&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;fromFile&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;loadable_nested_task_list.json&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Executing it, we see the expected output.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>genexplain-api/docs/tutorial$ java -jar ../../build/libs/genexplain-api-1.0.jar <span class="nb">exec</span> loading_nested_task_list.json 
INFO  com.genexplain.api.app.APIRunner - Running <span class="nb">command</span> <span class="nb">exec</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task 1a
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task 1b
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task 1c
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">2</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">3</span>
</pre></div>
</td></tr></table>

<p>As the output confirms, tasks <em>1a - 1c</em> were loaded from the file specified in the outer task list. We can add more and more levels
to this which allows us to break down workflows and pipelines into conveniently small and reusable pieces of JSON configurations.
And on top of that, there are more ways of loading executable tasks as well as specifying task parameters through placeholders that
make the whole more even easier to use and more flexible.</p>
<h4 id="infinite-flow">Infinite flow</h4>
<p>Since the core executor function continues to call itself until it encounters an executable task, it is possible to build an infinitely running
analysis pipeline. A possible use case is a process that continues to check for new data and analyzes them as soon as they
are available. Here we focus on showing a way to build a self-perpetuating pipeline. Another important component for the described use case is to follow alternative analysis branches selected by some condition which is shown in a later part of the tutorial.</p>
<p>Looking at the previous section, one can obviously create a self-perpetuating process by specifying an array of tasks in a file which itself is loaded again in the end. Let us call such a task file <em>infinite_loop.json</em> and configure tasks as shown below. So, at the end a <em>fromFile</em> instructions causes the same file to be loaded again, starting over the pipeline.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Starting infinite loop period&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Middle of infinite loop period&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;End of infinite loop period&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;fromFile&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;infinite_loop.json&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</td></tr></table>

<p>Our main config only requires a change of file name to load the <em>infinite_loop.json</em> and we rename it as <em>loading_infinite_loop.json</em>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;withoutConnect&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;fromFile&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;infinite_loop.json&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Execution of the <em>loading_infinite_loop.json</em> results in the expected output and requires forceful interruption.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>genexplain-api/docs/tutorial$ java -jar ../../build/libs/genexplain-api-1.0.jar <span class="nb">exec</span> loading_infinite_loop.json 
INFO  com.genexplain.api.app.APIRunner - Running <span class="nb">command</span> <span class="nb">exec</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Starting infinite loop period
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Middle of infinite loop period
INFO  c.genexplain.api.core.GxJsonExecutor - External output: End of infinite loop period
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Starting infinite loop period
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Middle of infinite loop period
INFO  c.genexplain.api.core.GxJsonExecutor - External output: End of infinite loop period
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Starting infinite loop period
<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</td></tr></table>

<h2 id="loading-from-a-task-library">Loading from a task library</h2>
<p>Until now, we have worked with lists of task objects. When I have taken the time to nicely write down the JSON config for some
analysis tool, I would like to reuse it at different places. In the simple list format we have covered so far, the tasks are unnamed
items and therefore not so easily accessible.
Let us extend the main JSON config by one property that instructs the Java application to load task definitions from files. This property
is called <em>loadTasks</em> and its value is an array with a list of files. A file that can be loaded contains JSON objects with key/value-pairs consisting of task name and task definition.
Here we create such a file named <em>task_lib.json</em> for the three example tasks.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;task1&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 1&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;task2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 2&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;task3&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;Executing task 3&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>This file is similar to the array of tasks in <em>loadable_task_list.json</em>, only that the outer structure is an object and the tasks have names. Next we adapt the main JSON config to load this small library of tasks.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;withoutConnect&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;loadTasks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;task_lib.json&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task1&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task2&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task3&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Executing the main JSON config shows the expected output, where it is important to note that the tasks are nevertheless executed in the specified order:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>genexplain-api/docs/tutorial$ java -jar ../../build/libs/genexplain-api-1.0.jar <span class="nb">exec</span> loading_task_lib.json 
INFO  com.genexplain.api.app.APIRunner - Running <span class="nb">command</span> <span class="nb">exec</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">1</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">2</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Executing task <span class="m">3</span>
</pre></div>
</td></tr></table>

<p>Since the <em>loadTasks</em> value is an array, one can specify many files to load task definitions from.</p>
<h2 id="parameter-placeholders">Parameter placeholders</h2>
<p>To make task definitions more reusable one can insert placeholders for parameters which are replaced by the desired
value specified in the main config. Let us modify the <em>task_lib.json</em> file and substitute the output strings with
placeholders as shown below. While we often use capital strings delimited by $-symbols, any readable string can be used as placeholder.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;task1&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;$FIRST_MESSAGE$&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;task2&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;SECOND_MESSAGE&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;task3&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="nt">&quot;showOutput&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;sh&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;script.sh&quot;</span><span class="p">,</span> <span class="s2">&quot;third message&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>In the main config we need to add a <em>replaceStrings</em> property whose value is an array of arrays. We use arrays here, because we want to maintain the order specified placeholders. For our example we add one array for each placeholder that shall be recognized with the replacement as second element.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;withoutConnect&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;replaceStrings&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;$FIRST_MESSAGE$&quot;</span><span class="p">,</span> <span class="s2">&quot;First task&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;SECOND_MESSAGE&quot;</span><span class="p">,</span> <span class="s2">&quot;Second task&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;third message&quot;</span><span class="p">,</span> <span class="s2">&quot;Third task&quot;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="nt">&quot;loadTasks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;placeholder_task_lib.json&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task1&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task2&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task3&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>In the output of our example workflow the placeholders are replaced by the specified strings.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>genexplain-api/docs/tutorial$ java -jar ../../build/libs/genexplain-api-1.0.jar <span class="nb">exec</span> loading_task_lib_with_placeholders.json 
INFO  com.genexplain.api.app.APIRunner - Running <span class="nb">command</span> <span class="nb">exec</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: First task
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Second task
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Third task
</pre></div>
</td></tr></table>

<p>Note that any JSON value can be applied for replacement.</p>
<h3 id="cascaded-replacement">Cascaded replacement</h3>
<p>To build pipelines from reusable task definitions and smaller workflows, it is important to know that the <em>replaceStrings</em> value is intentionally an array in order to take advantage of the sequence of substitutions. What happens in the code is that the program iterates over the placeholder strings and substitutes all occurrences in a task definition with the current replacement. This means that one can replace a placeholder with another placeholder whose value is defined a later position in the <em>replaceStrings</em> array. Here is an example. We change placeholders in the main config as shown below and save the new main config as <em>loading_task_lib_multiple_replacements.json</em>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;withoutConnect&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;replaceStrings&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;$FIRST_MESSAGE$&quot;</span><span class="p">,</span> <span class="s2">&quot;SECOND_MESSAGE&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;SECOND_MESSAGE&quot;</span><span class="p">,</span> <span class="s2">&quot;third message&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;third message&quot;</span><span class="p">,</span> <span class="s2">&quot;FINALLY&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;FINALLY&quot;</span><span class="p">,</span> <span class="s2">&quot;Finally, they are all equal.&quot;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="nt">&quot;loadTasks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;placeholder_task_lib.json&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task1&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task2&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task3&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>And the output shows the result indicated by the final replacement value.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>genexplain-api/docs/tutorial$ java -jar ../../build/libs/genexplain-api-1.0.jar <span class="nb">exec</span> loading_task_lib_multiple_replacements.json 
INFO  com.genexplain.api.app.APIRunner - Running <span class="nb">command</span> <span class="nb">exec</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Finally, they are all equal.
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Finally, they are all equal.
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Finally, they are all equal.
</pre></div>
</td></tr></table>

<p>This property of the placeholder handling is important to be able to create reusable task definitions with general placeholders, which can be customized as needed using a cascade of replacements defined in the main config.</p>
<h3 id="local-parameter-settings">Local parameter settings</h3>
<p>Being able to specify parameters as needed is certainly important. Therefore, there is an executor named <em>setParameters</em> that can alter the <em>replaceStrings</em> items. In the following example we show how to modify existing items. In addition, <em>setParameters</em> can add items in the beginning or at the end of the <em>replaceStrings</em> array as well as remove placeholders. The latter features are explained in the corresponding documentation section.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;withoutConnect&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;replaceStrings&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;$FIRST_MESSAGE$&quot;</span><span class="p">,</span> <span class="s2">&quot;SECOND_MESSAGE&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;SECOND_MESSAGE&quot;</span><span class="p">,</span> <span class="s2">&quot;third message&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;third message&quot;</span><span class="p">,</span> <span class="s2">&quot;FINALLY&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;FINALLY&quot;</span><span class="p">,</span> <span class="s2">&quot;Finally, they are all equal.&quot;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="nt">&quot;loadTasks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;placeholder_task_lib.json&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task1&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task2&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task3&quot;</span> <span class="p">},</span>
        <span class="p">{</span> 
            <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;setParameters&quot;</span><span class="p">,</span>
            <span class="nt">&quot;set&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;$FIRST_MESSAGE$&quot;</span><span class="p">:</span> <span class="s2">&quot;Not anymore!&quot;</span><span class="p">,</span>
                <span class="nt">&quot;SECOND_MESSAGE&quot;</span><span class="p">:</span> <span class="s2">&quot;What happened?&quot;</span><span class="p">,</span>
                <span class="nt">&quot;FINALLY&quot;</span><span class="p">:</span> <span class="s2">&quot;This can be changed again.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task1&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task2&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task3&quot;</span> <span class="p">},</span>
        <span class="p">{</span> 
            <span class="nt">&quot;do&quot;</span><span class="p">:</span> <span class="s2">&quot;setParameters&quot;</span><span class="p">,</span>
            <span class="nt">&quot;set&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;$FIRST_MESSAGE$&quot;</span><span class="p">:</span> <span class="s2">&quot;SECOND_MESSAGE&quot;</span><span class="p">,</span>
                <span class="nt">&quot;SECOND_MESSAGE&quot;</span><span class="p">:</span> <span class="s2">&quot;FINALLY&quot;</span><span class="p">,</span>
                <span class="nt">&quot;FINALLY&quot;</span><span class="p">:</span> <span class="s2">&quot;All equal again.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task1&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task2&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;fromLib&quot;</span><span class="p">:</span> <span class="s2">&quot;task3&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>And the output of this is:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>genexplain-api/docs/tutorial$ java -jar ../../build/libs/genexplain-api-1.0.jar <span class="nb">exec</span> loading_task_lib_local_replacements.json 
INFO  com.genexplain.api.app.APIRunner - Running <span class="nb">command</span> <span class="nb">exec</span>
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Finally, they are all equal.
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Finally, they are all equal.
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Finally, they are all equal.
INFO  c.genexplain.api.core.GxJsonExecutor - External output: Not anymore!
INFO  c.genexplain.api.core.GxJsonExecutor - External output: What happened?
INFO  c.genexplain.api.core.GxJsonExecutor - External output: This can be changed again.
INFO  c.genexplain.api.core.GxJsonExecutor - External output: All equal again.
INFO  c.genexplain.api.core.GxJsonExecutor - External output: All equal again.
INFO  c.genexplain.api.core.GxJsonExecutor - External output: All equal again.
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../json_interface/" title="JAR application manuals" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                JAR application manuals
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019 geneXplain GmbH, Wolfenbuettel, Germany
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.5e60981f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
    
      
    
  </body>
</html>